#include <NewPing.h>

const int trig1 = 2;
const int trig2 = 12;
const int trig3 = 13;

const int echo1 = 6;
const int echo2 = 10;
const int echo3 = 11;

#define pwm1 9
#define pwm2 3

#define in1 7
#define in2 8
#define in3 4
#define in4 5

NewPing sonar[3]{
  NewPing(trig1, echo1, 500),
  NewPing(trig2, echo2, 500),
  NewPing(trig3, echo3, 500)
};

void setup() {
  pinMode(pwm1, OUTPUT);
  pinMode(pwm2, OUTPUT);

  pinMode(in1, OUTPUT);
  pinMode(in2, OUTPUT);
  pinMode(in3, OUTPUT);
  pinMode(in4, OUTPUT);
}
int r = 0, l = 0, cnt = 0;

int roundCounter = 0;
int fdist = sonar[0].ping_cm();
int rdist = sonar[1].ping_cm();
int ldist = sonar[2].ping_cm();
int fdis=sonar[0].ping_cm(),rdis = sonar[1].ping_cm(),ldis = sonar[2].ping_cm();
void loop() {
  fdis = sonar[0].ping_cm();
  delay(10);
  rdis = sonar[1].ping_cm();
  delay(10);
  ldis = sonar[2].ping_cm();
  delay(10);
  analogWrite(pwm1, 65);
  analogWrite(pwm2, 255);
  if (fdis > 85 && rdis < 100 && ldis < 100) {
    digitalWrite(in1, HIGH);
    digitalWrite(in2, LOW);
    digitalWrite(in3, LOW);
    digitalWrite(in4, LOW);
  }
  if (fdis < 85 && l < 1){
    digitalWrite(in1, HIGH);
    digitalWrite(in2, LOW);
    digitalWrite(in3, LOW);
    digitalWrite(in4, HIGH);
    r++;
  }
  if (fdis < 85 && r < 1){
    digitalWrite(in1, HIGH);
    digitalWrite(in2, LOW);
    digitalWrite(in3, HIGH);
    digitalWrite(in4, LOW);
    l++;
  }
  if (fdis < 80 || rdis > 100 || ldis > 100){
    if(rdis > ldis && l<1)
      digitalWrite(in1, HIGH);
      digitalWrite(in2, LOW);
      digitalWrite(in3, LOW);
      digitalWrite(in4, HIGH);
      r++;
    }
    if(ldis > rdis && r < 1){
      digitalWrite(in1, HIGH);
      digitalWrite(in2, LOW);
      digitalWrite(in3, HIGH);
      digitalWrite(in4, LOW);
      l++;
    }
}
